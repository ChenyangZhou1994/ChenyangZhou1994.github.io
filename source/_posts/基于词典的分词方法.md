---
title: 基于词典的分词方法
top: false
cover: false
toc: true
mathjax: true
date: 2021-12-21 11:03:36
password:
summary:
tags: word-segmentation
categories: NLP
---

# 基于词典分词算法

## 1. 最大匹配法

### 1.1正向最大匹配算法 (FMM, Forward Maximum Matching)

#### 1.1.1 算法描述

正向最大匹配算法：

策略：

- 1）方向**从左往右**取词
- 2）取词最大长度为词典中长词的长度
- 3）每次右边减一个单字符
- 4）直到**词典中存在**或**剩下1个单字符**



需要		sentence - 句子 		user_dict = 词典			max_len = 词典中词的最大长度

```python
sentence = '我们在野生动物园玩'
```

```python
user_dict = ['我们', '在', '在野', '生动', '野生', '动物园', '野生动物园', '物', '玩']
```

```python
max_len = max(len(item) for item in user_dict)
```

具体逐一取词过程：



#### 1.1.2 代码实现

```python
def FMM_func(user_dict, sentence):
    '''
    FMM, Forward Maximum Matching, 正向最大匹配法
    :param user_dict: 词典
    :param sentence: 句子
    :return: result:句子分词结果, word_count:总分词数, char_count:总单字符数
    '''
    result = []
    max_len = max(len(item) for item in user_dict)
    start = 0
    while start != len(sentence):
        index = start + max_len
        if index > len(sentence):
            index = len(sentence)
        for i in range(max_len):
            if (sentence[start:index] in user_dict) or (len(sentence[start:index]) == 1):
                result.append(sentence[start:index])
                start = index
                break
            index += -1
    char_counts = 0
    for i in result:
        if len(i) == 1:
            char_counts += 1
    word_counts = len(result)
    return [result, word_counts, char_counts]
```

```python
user_dict = ['我们', '在', '在野', '生动', '野生', '动物园', '野生动物园', '物', '玩']
sentence = '我们在野生动物园玩'
result = FMM_func(user_dict, sentence)
sentences = result[0]
word_count = result[1]
char_count = result[2]
print("Forward Maximum Matching:")
print("分词数:%d个" % word_count)
print("单字符数:%d个" % char_count)
print("分词结果如下:")
for i in sentences:
    print(i, end='/')
```

运行结果：

```python
Forward Maximum Matching:
分词数:6个
单字符数:3个
分词结果如下:
我们/在野/生动/物/园/玩/
```

### 2.1.逆向最大匹配算法 (BMM, Backward Maximum Matching)

#### 2.1.1 算法描述

策略：

- 1）方向**从右往左**取词

- 2）取词最大长度为词典中长词的长度
- 3）每次右边减一个字
- 4）直到**词典中存在**或**剩下1个单字**

需要 		sentence - 句子 			user_dict = 词典 			max_len = 词典中词的最大长度      

```python
sentence = '我们在野生动物园玩'
```

```python
user_dict = ['我们', '在', '在野', '生动', '野生', '动物园', '野生动物园', '物', '玩']
```

```python
max_len = max([len(item) for item in user_dict])
```

#### 2.1.2 代码实现

```python
def BMM_func(user_dict, sentence):
    '''
    BMM, Backward Maximum Matching, 反向最大匹配算法
    :param user_dict: 词典
    :param sentence: 句子
    :return: result:句子分词结果, word_count:总分词数, char_count:总单字符数
    '''
    result = []
    max_len = max([len(item) for item in user_dict])
    start = len(sentence)
    while start != 0:
        index = start - max_len
        if index < 0:
            index = 0
        for i in range(max_len):
            if (sentence[index:start] in user_dict) or (len(sentence[index:start]) == 1):
                result.append(sentence[index:start])
                start = index
                break
            index += 1
    char_counts = 0
    for i in result:
        if len(i) == 1:
            char_counts += 1
    word_counts = len(result)
    return [result, word_counts, char_counts]
```

```python
user_dict = ['我们', '在', '在野', '生动', '野生', '动物园', '野生动物园', '物', '玩']
sentence = '我们在野生动物园玩'
result = BMM_func(user_dict, sentence)
sentences = result[0]
word_count = result[1]
char_count = result[2]
print("Backward Maximum Matching:")
print("分词数:%d个" % word_count)
print("单字符数:%d个" % char_count)
print("分词结果如下:")
for i in sentences[::-1]:
    print(i, end='/')
```

运行结果：

```python
Backward Maximum Matching:
分词数:4个
单字符数:2个
分词结果如下:
我们/在/野生动物园/玩/
```

### 1.3.双向匹配分词算法

#### 1.3.1 算法描述

策略：      

- 1）分别执行FMM和BMM        

- 2）选取标准：        

  - 2.1 比较分词数，选取较少的。        

  - 2.2 分词数相同时，选取单个字数量较少的。        

需要 		sentence - 句子 			user_dict = 词典 			max_len = 词典中词的最大长度      

```python
sentence = '我们在野生动物园玩'
```

```python
user_dict = ['我们', '在', '在野', '生动', '野生', '动物园', '野生动物园', '物', '玩']
```

```python
max_len = max([len(item) for item in user_dict])
```

#### 1.3.2 代码实现

```python
def BiMM_func(user_dict, sentence):
    '''
    BiMM, Bi-directional Maximum Matching, 双向最大匹配算法
    :param user_dict: 词典
    :param sentence: 句子
    :return: result:句子分词结果, word_count:总分词数, char_count:总单字符数
    '''
    FMM_result = FMM_func(user_dict=user_dict, sentence=sentence)
    BMM_result = BMM_func(user_dict=user_dict, sentence=sentence)
    if FMM_result[1] < BMM_result[1]:
        result = FMM_result[0]
    elif FMM_result[1] == BMM_result[1]:
        if FMM_result[2] < BMM_result[2]:
            result = FMM_result[0]
        else:
            result = BMM_result[0]
    else:
        result = BMM_result[0]
    char_counts = 0
    for i in result:
        if len(i) == 1:
            char_counts += 1
    word_counts = len(result)
    return [result, word_counts, char_counts]
```

```python
user_dict = ['我们', '在', '在野', '生动', '野生', '动物园', '野生动物园', '物', '玩']
sentence = '我们在野生动物园玩'
result = BiMM_func(user_dict, sentence)
sentences = result[0]
word_count = result[1]
char_count = result[2]
print("Bi-directional Maximum Matching:")
print("分词数:%d个" % word_count)
print("单字符数:%d个" % char_count)
print("分词结果如下:")
for i in sentences[::-1]:
    print(i, end='/')
```

运行结果：

```python
Bi-directional Maximum Matching:
分词数:4个
单字符数:2个
分词结果如下:
我们/在/野生动物园/玩/
```

